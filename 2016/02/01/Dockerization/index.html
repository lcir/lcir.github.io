<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Nějaký ten popis by to chtělo?"><title>Dokerizace v FG Forrest | Pozdní odpoledne</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/very-simple.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><!-- include the sidebar--><!-- include ./includes/sidebar.jade--><!-- Blog title and subtitle--><header><div class="container header"><a id="logo" href="/." class="title">Pozdní odpoledne</a><span class="subtitle"></span><label id="toggle-menu" for="menu" onclick><i class="fa fa-bars"></i></label></div></header><!-- use checkbox hack for toggle nav-bar on small screens--><input id="menu" type="checkbox"><!-- Navigation Links--><nav id="nav"><div class="container"><a href="/" class="sidebar-nav-item active">Domů</a><a href="/archives" class="sidebar-nav-item">Archív</a></div></nav><div id="header-margin-bar"></div><!-- gallery that comes before the header--><div class="wrapper"><div class="container post-header"><h1>Dokerizace v FG Forrest</h1></div></div><div class="wrapper"><div class="container meta"><div class="post-time">2016-02-01</div></div></div><article><div class="container post"><p>Už to bude pár let co se mezi námi objevil pojem Docker. A s ním dokerizace všeho živého a neživého v IT. Technologie Dockeru se už pomalu začíná usazovat a začíná s ní koketovat čím dál tím firem. Nedávno jsme se rozhodli i my v FG Forrest, že tuto technologii vyzkoušíme a zařadíme do běžného workflow našich aplikací.</p>
<p>Předpokládáme, že všichni víte, co je to Docker. Pokud ne, doporučujeme si poslechnout přednášku a <a href="http://asd.cz" target="_blank" rel="external">youtube</a> Martina Damovského a Radima Dana Pánka, jejichž vystoupeni jsme byli jako firma partnerem. </p>
<h2 id="Co_od_toho_o_u010Dek_E1v_E1me_3F"><a href="#Co_od_toho_o_u010Dek_E1v_E1me_3F" class="headerlink" title="Co od toho očekáváme?"></a>Co od toho očekáváme?</h2><p>To je dobrá otázka, s jednoduchou odpovědí a tou je zjednodušení práce.  </p>
<h3 id="Co_n_E1m_m_u016F_u017Ee_Docker_p_u0159in_E9st_3F"><a href="#Co_n_E1m_m_u016F_u017Ee_Docker_p_u0159in_E9st_3F" class="headerlink" title="Co nám může Docker přinést?"></a>Co nám může Docker přinést?</h3><ul>
<li>Pomůže nám v integračním testování</li>
<li>Sjednotíme verze a konfigurace služeb na dev/test/prod</li>
<li>Síťovou “virtualizaci” mezi kontejnery</li>
<li>Usnadní se deployment</li>
<li><p>Bude mnohem rychlejší spuštění archaických aplikací</p>
<h2 id="Sjednocen_ED_verz_ED"><a href="#Sjednocen_ED_verz_ED" class="headerlink" title="Sjednocení verzí"></a>Sjednocení verzí</h2><p>Vzhledem k tomu, že firma FG Forrest je už nějakou chvilku na trhu, disponuje velkou škálou klientských aplikací. Některé aplikace běží například na Java 5 nebo starších verzí MySQL 5. Tyto nástroje jsou v dnešní době už těžko sehnatelné a velmi komplikovaně spustitelné na platformách jako je Mac OSX a jiné.</p>
</li>
</ul>
<p> Pokud na takových aplikacích probíhal i nyní nový vývoj, musel vývojář používat verzi nástroje jinou, než na které pojede aplikace na produkci. Tento stav je nežádoucí, jelikož nástroje se mouhou verze od verze lišit. Například je tomu tak u MySQL 5. Zde Oracle pod odkoupení Sun Microsystems změnil SQL definice a syntax.</p>
<p> Další kapitolou jsou testy. Máme CI Jenkins, kde probíhá testování opět velké škály aplikací. Bohužel se ale pro spouštění Unit testů používá jediná MySQL databáze k tomu určená. Pro velkou množinu aplikací je tato MySQL databáze zastaralá oproti produkci.</p>
<p> Vše co jsem popsal mohlo a také i nejednou zapříčinilo problém. A proto dokerizace nástrojů jako MySQL, Elasticsearch a následné používání image konkrétní verze nástroje pro konkrétní aplikaci zajistí určitou chtěnou uniformitu prostředí. V tomto případě jsme začali sestavovat vlastní image nástrojů. Můžeme tak používat stejnou verzi nástroje jak na produkci (zde nativně instalovanou), tak i pro testy a vývoj dokerizovanou.</p>
<h2 id="Docker_pro_usnadn_u011Bn_ED_deploymentu"><a href="#Docker_pro_usnadn_u011Bn_ED_deploymentu" class="headerlink" title="Docker pro usnadnění deploymentu"></a>Docker pro usnadnění deploymentu</h2><p> Je to jedna z hlavních výhod, kterou se prezentuje Docker. Usnadní deploy aplikace na server. Má to ale jeden podstatný háček. Nativně instalovaná aplikace bude mít vždy vyšší výkon. Možná nepatrně, ale bude. A proto se nedoporučuje dokerizovat na produkci například databázi.</p>
<p> Naše aplikace, ale používají kromě databází další podpůrné nástroje. Používáme vlastní mikroslužby pro generování PDF, nebo streamování videa. A přesně deployment těchto aplikací je učebnicový příklad využití Dockeru. Pomocí CI si sestavíme image s tímto nástrojem a pro vývoj, testy, produkci můžeme distribuovat už pouze jen home-build image. Rozjetí takové aplikace je pak otázkou chvilky i pro neznalého.</p>
<h2 id="Starod_E1vn_E9_aplikace_a_jejich_spu_u0161t_u011Bn_ED"><a href="#Starod_E1vn_E9_aplikace_a_jejich_spu_u0161t_u011Bn_ED" class="headerlink" title="Starodávné aplikace a jejich spuštění"></a>Starodávné aplikace a jejich spuštění</h2><p> Jako firma s dlouhou historií máme mnoho postarších projektů. Postupem let se informace o projktech vytratily. A jejich současné rozjetí jak na vývoji, tak testech, produkci je poměrně komplikovanou záležitostí. Pomocí dockeru si můžeme vystavět runtime prostředí pro aplikaci, včetně setavení, aby byla velice snadno spustitelná i pomocí starších nástrojů jako je Java 5 atd.</p>
<h2 id="S_ED_u0165ov_E1_virtualizace"><a href="#S_ED_u0165ov_E1_virtualizace" class="headerlink" title="Síťová virtualizace"></a>Síťová virtualizace</h2><p> Kontejnery si mezi sebou mohou povídat. A mohou si povídat tak, že nemusí blokovat tcp/udp porty hostitelského systémů. A proto si můžeme sestavit “farmičky” dockerových kontejnerů, které si mezi sebou rozumí a nás zajímá pouze jen finální výstup. A to buď cli, nebo např. http tcp port, socket. </p>
<p> Takových “farmiček” si můžeme spustit na hostitelském systému hned několik. A to právě proto, že neblokují hostitelské systémové prostředky. Síťová virtualizace uvnitř dockeru je podobná síťi postavené mezi plně virtualizovanými systémy. V každé “farmičce” tak můžeme mít MySQL, Elasticsearch, RabbitMQ, Tomcat a další dopňkové mikroslužby. Ale navenek se “farmička” hlásí pouze tak jak potřebujeme. </p>
<h2 id="Integra_u010Dn_ED_testy_s_Dockerem_-_cesta_tam_a_zase_zp_u011Bt"><a href="#Integra_u010Dn_ED_testy_s_Dockerem_-_cesta_tam_a_zase_zp_u011Bt" class="headerlink" title="Integrační testy s Dockerem - cesta tam a zase zpět"></a>Integrační testy s Dockerem - cesta tam a zase zpět</h2></div><!-- comment system--><div class="container"><hr></div></article><footer id="footer"><div class="container"><div class="bar"><div class="social"><a href="mailto:lukas.cir@ptw.cz" target="_blank"><i class="fa fa-envelope-o"></i></a><a href="http://twitter.com/lukascir" target="_blank"><i class="fa fa-twitter"></i></a><a href="https://github.com/lcir" target="_blank"><i class="fa fa-github"></i></a><a href="https://plus.google.com/110631283049955355822" target="_blank"><i class="fa fa-google-plus"></i></a><a href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></div><div class="footer">© 2016 <a href="/" rel="nofollow">Pozdní odpoledne</a>. Powered by <a rel="nofollow" target="_blank" href="https://hexo.io">Hexo</a>. Theme <a target="_blank" href="https://github.com/lotabout/very-simple">very-simple</a>.</div></div></div></footer><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
    $(".fancybox").fancybox();
});</script></body></html>